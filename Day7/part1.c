#include <stdio.h>
#include <stdlib.h>


char	**ft_split(char const *s, char c);



void ray_casting(char **map, long *total, int row, int col, int h)
{
	int splitted = 0;
	while (row < h)
	{
		
		if (map[row][col] == '^')
		{
			if (map[row][col-1] != '|')
			{
				ray_casting(map, total, row, col - 1, h);
				splitted = 1;
			}
			if (map[row][col+1] != '|')
			{
				ray_casting(map, total, row, col + 1, h);
				splitted = 1;
			}
			if (splitted == 1)
				*total += 1;
			return ;
		}
		else
			map[row][col] = '|';
		row++;
	}
}



int main()
{

	//char *input = ".......S.......;...............;.......^.......;...............;......^.^......;...............;.....^.^.^.....;...............;....^.^...^....;...............;...^.^...^.^...;...............;..^...^.....^..;...............;.^.^.^.^.^...^.;...............";
	
	
	char *input = "......................................................................S......................................................................;.............................................................................................................................................;......................................................................^......................................................................;.............................................................................................................................................;.....................................................................^.^.....................................................................;.............................................................................................................................................;....................................................................^...^....................................................................;.............................................................................................................................................;...................................................................^.^.^.^...................................................................;.............................................................................................................................................;..................................................................^.^...^.^..................................................................;.............................................................................................................................................;.................................................................^.^...^...^.................................................................;.............................................................................................................................................;................................................................^.^...^.^...^................................................................;.............................................................................................................................................;...............................................................^...^.^.^.^...^...............................................................;.............................................................................................................................................;..............................................................^.^.....^.....^.^..............................................................;.............................................................................................................................................;.............................................................^.....^...^.^...^.^.............................................................;.............................................................................................................................................;............................................................^.^.^.^.^.^.......^.^............................................................;.............................................................................................................................................;...........................................................^...^.....^.......^.^.^...........................................................;.............................................................................................................................................;..........................................................^.^...^...^...^...^.^.^.^..........................................................;.............................................................................................................................................;.........................................................^.^...^.^.^.^...^.......^.^.........................................................;.............................................................................................................................................;........................................................^.^.^.^.^.^.....^...^.^.^...^........................................................;.............................................................................................................................................;.......................................................^.^.^.^...^...^.^.......^.^.^.^.......................................................;.............................................................................................................................................;......................................................^.....^...^.^...^.^...^...^.^...^......................................................;.............................................................................................................................................;.....................................................^.^.^.............^.^.^.^.^.^.....^.....................................................;.............................................................................................................................................;....................................................^.^.^.^.^.^.^.^...^.......^.^.^.^...^....................................................;.............................................................................................................................................;...................................................^.^.^.^.^...^.^.^...^...^.....^.^.^...^...................................................;.............................................................................................................................................;..................................................^.^.^.....^.........^.^.^.^...^.....^.^.^..................................................;.............................................................................................................................................;.................................................^...^.....^.......^.^.^.^...^.^.^.^.^.^.^.^.................................................;.............................................................................................................................................;................................................^.^.^...^.......^.^.^.^.......^...^.^.^.^...^................................................;.............................................................................................................................................;...............................................^.^.^...........^.^.^.^.^...^.^.....^...^.....^...............................................;.............................................................................................................................................;..............................................^.^.....^.^.^.^...^.^...^.^.^.^.^.^.^.^.......^.^..............................................;.............................................................................................................................................;.............................................^.^.....^.^.^...^.^...^.^...^.^.....^.^...^.^...^.^.............................................;.............................................................................................................................................;............................................^.^.....^.^.^.^.^...^.^.^.^.^.^.....^...^.^...^...^.^............................................;.............................................................................................................................................;...........................................^.^.^.^...^.^.....^...^...^.^.^.^.^.^.........^...^.^.^...........................................;.............................................................................................................................................;..........................................^.^...^.^.^...^.^.^.^...^.^...^.^.^...^...^...^.^.^.^.^.^..........................................;.............................................................................................................................................;.........................................^.^.^.^...^.^...^.^.^.....^.^.....^.^.^...^.....^.^.^...^.^.........................................;.............................................................................................................................................;........................................^.^.....^.^.^...^...^.^.^...^.^.^.^.^...^.^.^.^.....^.^.^.^.^........................................;.............................................................................................................................................;.......................................^...^.^.........^.^.....^.^.^...^...^.^.^.^.^...^.^.^.^.^.^.^.^.......................................;.............................................................................................................................................;......................................^.^...^.^...^.....^...^.^.^.^.....^.^.^...^.^.^.^.^.....^.^.....^......................................;.............................................................................................................................................;.....................................^.^.^...^.^.^.^.^...^.^.^...^...^.^.^...^.^.^.^...^...^.^.^...^...^.....................................;.............................................................................................................................................;....................................^.^.^...^.^.............^...^.^.^...^...^.^...^.^.^...^.^.^...^.^.^.^....................................;.............................................................................................................................................;...................................^.^.^...^...^.....^.......^.....^.^.^.^...^...^.^...^.^.^.^.^.....^...^...................................;.............................................................................................................................................;..................................^.^...^...^.^.^...^...^.^.....^.^.^...^.........^.....^...^.^.^.^...^...^..................................;.............................................................................................................................................;.................................^.^.^.......^.^.^.......^.^...^.^.^...^...^.^.....^.^.^.^.^.^...^.^.^.^.^.^.................................;.............................................................................................................................................;................................^.^.^...^.^.......^...^.^.^.....^.^.^.^.....^.^.^.^...^.^.^...^.^.^...^...^.^................................;.............................................................................................................................................;...............................^.^...^.......^.^.^.^.^.^.^.^.......^.^.^.............^.^.^...^.^.^.^...^...^.^...............................;.............................................................................................................................................;..............................^.^.^...^.^.^...^.^.....^.....^.^.^.^.^.^.^.....^.^.^...^.^...^...^.^.^.^.^.^.^.^..............................;.............................................................................................................................................;.............................^.^.^.^.^.^.^...^.^.^.^...^.^.^.^...^.^.^.^.^.........^...^.......^.^...^.^.^.^.^.^.............................;.............................................................................................................................................;............................^...^.^.....^.^.^.........^.^.^.....^.^...^.^.^.....^.^.^.^...^.^.^.^.^.^.^.........^............................;.............................................................................................................................................;...........................^...^...^.......^...^.^.....^...^.^.^.^...^.^...^.^.^.^...^...^.^.........^...^...^...^...........................;.............................................................................................................................................;..........................^.^.^.^.^.....^.^.^.^.....^.....^...^.^...^...^.^.^.^...^.^.......^.^.^.^...^...^.^.^.^.^..........................;.............................................................................................................................................;.........................^.^.^.^...^.^.^.......^.^.....^.^...^...^.^.^.^...^...^...^...^.....^.^.^.^...^.^.^...^.^.^.........................;.............................................................................................................................................;........................^.^...^.^.....^.^.^...........^.^.^...^.^...^.......^.......^...^.^.^.^...^.^.^.^.^.^.^.^.^.^........................;.............................................................................................................................................;.......................^...........^...^.^.........^.^.^.........^...^.....^.^...^.^.^.^.^.^...^.^.^.^...^...^.^.....^.......................;.............................................................................................................................................;......................^.^.^...^.^...^...^.^.........^...^.^.^.^.^...^.^.^.^.^...^.^.^.........^.^...^.^.^.^.....^.^...^......................;.............................................................................................................................................;.....................^...^.^.^.^.^.^...^.^...^.....^...^.^...^.^...^.....^.^.^.^.^.^.^.....^.^.^...^.^...^.^.^.^...^.^.^.....................;.............................................................................................................................................;....................^.^...^...^.^...^.^.^.....^...^.^.^...^.^.^.^.^.....^.^.^...^.....^.^.^...^.^.^.^.^.^.^.^.^.^.......^....................;.............................................................................................................................................;...................^.^...^.^.^...^.^...^.^.^.^...^.^.^.....^.^.^...^.^.......^.^...^.^...^.^...^.^...^...^.....^.....^.^.^...................;.............................................................................................................................................;..................^.^.^.^...^...^...^.^...^.^...^.^.^.....^...^.^...^.^.^.^.^.^.^.^.^.^.^.^...^.....^.^.^.^.^.^.^...^.^.^.^..................;.............................................................................................................................................;.................^.^.^.^.^.^.^...^.^.^.^.............^.^...^...^.^...^.........^.....^.^...^.....^.^...^.....^...^...^.^.^.^.................;.............................................................................................................................................;................^...^.^.^.^.^.^.^...^...^.^.^.^.^...^.^.^.^...^.......^.^.^.^.^.....^.^.^.^.^.^...^.....^...^.^...^.^.^.^...^................;.............................................................................................................................................;...............^.^.^.^.^...^.^.^.^.^...^.......^.^.^...^.^...^.^.......^.^.....^.^.^...^...^.^...^.....^.^...^.^.^.^.^.^.^.^.^...............;.............................................................................................................................................;..............^.^.^.^.^.....^.^.......^.^.^.^...^.^...^...^.^.^.^.^.^.^.....^.^.^.^.^.^.......^.^.^.^.^...^.^...^.....^...^.^.^..............;.............................................................................................................................................;.............^.^.^.....^.^.^.^...^...^.^.......^.^...^.^.......^.^.....^.^...^.^.^.^.^.^.....^.^.^.^.......^.^.^.^.....^.^.^.^.^.............;.............................................................................................................................................;............^.^...^.^.....^.^.^.^...^.^.^.^.....^.^.^.^.......^...^.^...^.^.^.^...^.^.^.^.^.^.^...^.^.^...^.^...^.^.^.^.^.....^.^............;.............................................................................................................................................;...........^.^.^.^.^.^...^.^.....^...^.^.^.^.^...^...^.^.^.^.^.^.^.....^.^.^.......^.^.^.^.^...^.^.^.^.....^.^.^.^.^.^.....^.^.^.^...........;.............................................................................................................................................;..........^...^.^.^...^.^.^.^.^.^.^.^.^.....^.^...^.^.^.^...^.^.^...^.............^.^.......^.^.^.^...^...^.^.^...^.^...^.^.......^..........;.............................................................................................................................................;.........^.^.^.^.^.^.^...^.^.^...^...^...^.^.^.^.....^...^.^...^.^.....^.^.^.^.^.^.^.^...^...^.^.^.^.^.^.^...^.^.^.^...^.....^.....^.........;.............................................................................................................................................;........^.^.^...^.....^.^...^...^.....^.....^.^.^...^.^.^...^...^...^.^...^.^...^...^.....^.^.^.^...^.......^...^.....^.^.^...^.^...^........;.............................................................................................................................................;.......^.......^...^.....^.^...^.^.^.^.^.^.^.............^.^.^...^...^.^.^.^.^.^.^.......^.....^.^.^.^.^.^.^.....^.^.^.^.^.^.^...^...^.......;.............................................................................................................................................;......^.^.^.^.^.^...^.^.^.^...^...^.^.^.^.^.......^.....^.^...^...^.^.....^...^.^.^.^...^.^.^...^.^.^.^.^.....^.....^.......^.......^.^......;.............................................................................................................................................;.....^...^.^.^.^.^...^.....^.^.....^.^.......^.^.^...^.^.^.^...^.^.^...^.^.^...^.^.^...^.^.^.............^.....^.^.^.^.^.^.......^.^.^.^.....;.............................................................................................................................................;....^.......^.^...^.^...^...^.^.^.^.^.^.^...^.^.^.^...^.^.....^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.......^...........^.....^...^.^.^.^.^....;.............................................................................................................................................;...^.^.^.^.....^...^.^.....^.........^.^.^...^...^.^.^...^.^.^.^.^.^...^.......^.^.....^...^...^.^.^.^.^.^.^...^...^.^...^.^.^.^.........^...;.............................................................................................................................................;..^.^.^...^.....^.....^.^...^.^.^.^.^.^.^.^.^...^...^...^.^.^.^...^.^.^...^.^.^.^.^...^...^.^.^.^...^...^.^.....^.^.....^...^...^.^.......^..;.............................................................................................................................................;.^.^.^.^.^.^...^.^.^...^...^.....^...^.^.^.....^.....^.^.^.^.......^.^...^.^...^.^.^.^...^.^...^.^...^.^.^.....^.^.^.^.^...^.^.......^.^.^.^.;.............................................................................................................................................";
	
	
	
	
	char **map = ft_split(input, ';');
	
	int i = 0;
	long total = 0;
	while (map[0][i] != 'S') //pilla la posion inicial
		i++;
	int h = 0 ;
	while (map[h])
		h++;
	ray_casting(map, &total, 0, i, h);
	
	int j = 0;
	while (map[j])
	{
		printf("%s\n", map[j]);
		j++;
	}
	
	
	printf("total splitted times: %ld\n", total);

}




















